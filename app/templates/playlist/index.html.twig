{% extends 'base.html.twig' %}

{% block title %}Playlists officielles ‚Äì La Groove Box{% endblock %}

{% block body %}
    <h1>Playlists officielles ‚Äì La Groove Box</h1>

    {% for playlist in playlists %}
        <div class="playlist">
            <h2>{{ playlist.name }}</h2>
            <p>Cr√©√©e par {{ playlist.owner.display_name }}</p>

            <iframe style="border-radius:12px"
                    src="https://open.spotify.com/embed/playlist/{{ playlist.id }}"
                    width="100%" height="152" frameborder="0"
                    allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                    loading="lazy">
            </iframe>

            {% if app.user %}
                <form action="{{ path('playlist_toggle_favorite', { id: playlist.id }) }}" method="post">
                    {% if playlist.id in app.user.favoritePlaylists %}
                        <button type="submit" class="btn btn-danger">Retirer des favoris ‚ù§Ô∏è</button>
                    {% else %}
                        <button type="submit" class="btn btn-primary">Ajouter aux favoris ü§ç</button>
                    {% endif %}
                </form>
            {% endif %}
        </div>
    {% endfor %}
{% endblock %}

